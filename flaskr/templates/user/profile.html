{% extends 'base.html' %}

{% block title %}Profil de {{user.username}}{% endblock %}

{% block content %}
<section>

    <div>
        {% if user.first_name %}
        <h1 class="title is-2">{{user.firstName}}</h1>
        {% endif %}

        {% if user.accreditation > 1 %}
        <h2 class="title is-3">👑 {{user.username}}</h2>
        {% else %}
        <h2 class="title is-3">{{user.username}}</h2>
        {% endif %}
    </div>

    <div>
        <h3 class="title is-5">Bio</h3>
        {% if user.bio %}
        <p>{{user.bio}}</p><br>
        {% else %}
        <p>Cet utilisateur n'a pas de bio !</p><br>
        {% endif %}
    </div>

    <div>
        <h3 class="title is-5">Anniversaire</h3>
        {% if today.month == user.date_of_birth.month and today.day == user.date_of_birth.day %}
        <p>🎂 {{ user.date_of_birth.strftime('%d/%m/%y') }}</p>
        {% else %}
        <p>{{ user.date_of_birth.strftime('%d/%m/%y') }}</p>
        {% endif %}
    </div>

    <div>
        <h1 class="title is-5">Réseaux sociaux</h1>

        {% if user.instagram %}
        <a href="https://instagram.com/{{user.instagram}}">@{{user.instagram}}</a><br>
        {% endif %}

        {% if user.twitter %}
        <a href="https://twitter.com/{{user.twitter}}">@{{user.twitter}}</a><br>
        {% endif %}

        {% if user.github %}
        <a href="https://github.com/{{user.github}}">@{{user.github}}</a><br>
        {% endif %}

        {% if user.website %}
        <a href="{{user.website}}">Site internet</a><br>
        {% endif %}

        {% if not user.instagram and not user.twitter and not user.github and not user.website %}
        <p>Aucun réseau social n'est renseigné !</p>
        {% endif %}
    </div>

    {% from 'components/posts_list.html' import select_list_view %}
    {{ select_list_view(posts) }}

    {% if user.id == g.user.id %}
    <div>
        <a class="button my-2 is-success" href="{{ url_for('user.edit', username=user.username) }}">
            Editer mon profil</a>
        <form action="{{ url_for('user.delete', username=user.username) }}" method="post">
            <input class="button is-danger is-light" type="submit" value="Supprimer mon compte"
                   onclick="return confirm('Etes vous sûr ?');">
        </form>
    </div>
    {% endif %}

    {% if g.user['admin'] and not user['admin'] and user.id != g.user['id'] %}
    {% if user.admin == 0%}
    <a class="button is-info is-light is-outlined my-2" href="{{ url_for('admin.add_admin', username=user.username) }}">Ajout
        admin</a>
    {% else %}
    <a class="button is-danger is-light is-outlined my-2"
       href="{{ url_for('admin.remove_admin', username=user.username) }}">Supprimer admin</a>
    {%endif%}
    <form action="{{ url_for('user.delete', username=user.username) }}" method="post">
        <input class="button is-danger is-light my-2" type="submit" value="Supprimer ce compte"
               onclick="return confirm('Etes vous sûr ?');">
    </form>
    {% endif %}
    {% endblock %}
</section>